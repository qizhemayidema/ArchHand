{"version":3,"file":"flvplayer-control.js","sources":["../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../src/control/icons/index.js","../../src/control/template.js","../../node_modules/@babel/runtime/helpers/typeof.js","../../src/utils/index.js","../../src/control/observer.js","../../src/control/hotkey.js","../../node_modules/screenfull/dist/screenfull.js","../../src/control/property.js","../../src/control/events.js","../../src/control/index.js"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","import play from './play.svg';\nimport pause from './pause.svg';\nimport volume from './volume.svg';\nimport volumeClose from './volume-close.svg';\nimport fullscreen from './fullscreen.svg';\nimport loading from './loading.svg';\n\nconst iconsMap = {\n    play,\n    pause,\n    volume,\n    volumeClose,\n    fullscreen,\n    loading,\n};\n\nexport default Object.keys(iconsMap).reduce((icons, key) => {\n    icons[key] = `<i class=\"flvplayer-icon flvplayer-icon-${key}\">${iconsMap[key]}</i>`;\n    return icons;\n}, {});\n","import icons from './icons';\n\nexport default function template(flv, control) {\n    const { options } = flv;\n\n    flv.player.$player.classList.add('flvplayer-controls-show');\n    if (options.live) {\n        flv.player.$player.classList.add('flvplayer-live');\n    }\n\n    flv.player.$player.insertAdjacentHTML(\n        'beforeend',\n        `\n        ${options.poster ? `<div class=\"flvplayer-poster\" style=\"background-image: url(${options.poster})\"></div>` : ''}\n            <div class=\"flvplayer-loading\">${icons.loading}</div>\n            <div class=\"flvplayer-controls\">\n                ${\n                    !options.live\n                        ? `\n                    <div class=\"flvplayer-controls-progress\">\n                        <div class=\"flvplayer-loaded\"></div>\n                        <div class=\"flvplayer-played\">\n                            <div class=\"flvplayer-indicator\"></div>\n                        </div>\n                    </div>\n                `\n                        : ''\n                }\n                <div class=\"flvplayer-controls-bottom\">\n                    <div class=\"flvplayer-controls-left\">\n                        <div class=\"flvplayer-controls-item flvplayer-state\">\n                            <div class=\"flvplayer-play\">${icons.play}</div>\n                            <div class=\"flvplayer-pause\">${icons.pause}</div>\n                        </div>\n                        ${\n                            options.hasAudio\n                                ? `\n                            <div class=\"flvplayer-controls-item flvplayer-volume\">\n                                <div class=\"flvplayer-volume-on\">${icons.volume}</div>\n                                <div class=\"flvplayer-volume-off\">${icons.volumeClose}</div>\n                                ${\n                                    flv.isMobile\n                                        ? ''\n                                        : `\n                                    <div class=\"flvplayer-volume-panel\">\n                                        <div class=\"flvplayer-volume-panel-handle\"></div>\n                                    </div>\n                                `\n                                }\n                            </div>\n                        `\n                                : ''\n                        }\n                        ${\n                            !options.live\n                                ? `\n                            <div class=\"flvplayer-controls-item flvplayer-time\">\n                                <span class=\"flvplayer-current\">00:00</span> / <span class=\"flvplayer-duration\">00:00</span>\n                            </div>\n                        `\n                                : ''\n                        }\n                    </div>\n                    <div class=\"flvplayer-controls-right\">\n                        <div class=\"flvplayer-controls-item flvplayer-fullscreen\">${icons.fullscreen}</div>\n                    </div>\n                </div>\n            </div>\n        `,\n    );\n\n    Object.defineProperty(control, '$poster', {\n        value: options.container.querySelector('.flvplayer-poster'),\n    });\n\n    Object.defineProperty(control, '$loading', {\n        value: options.container.querySelector('.flvplayer-loading'),\n    });\n\n    Object.defineProperty(control, '$controls', {\n        value: options.container.querySelector('.flvplayer-controls'),\n    });\n\n    Object.defineProperty(control, '$state', {\n        value: options.container.querySelector('.flvplayer-state'),\n    });\n\n    Object.defineProperty(control, '$play', {\n        value: options.container.querySelector('.flvplayer-play'),\n    });\n\n    Object.defineProperty(control, '$pause', {\n        value: options.container.querySelector('.flvplayer-pause'),\n    });\n\n    Object.defineProperty(control, '$current', {\n        value: options.container.querySelector('.flvplayer-current'),\n    });\n\n    Object.defineProperty(control, '$duration', {\n        value: options.container.querySelector('.flvplayer-duration'),\n    });\n\n    Object.defineProperty(control, '$volumeOn', {\n        value: options.container.querySelector('.flvplayer-volume-on'),\n    });\n\n    Object.defineProperty(control, '$volumeOff', {\n        value: options.container.querySelector('.flvplayer-volume-off'),\n    });\n\n    Object.defineProperty(control, '$volumePanel', {\n        value: options.container.querySelector('.flvplayer-volume-panel'),\n    });\n\n    Object.defineProperty(control, '$volumeHandle', {\n        value: options.container.querySelector('.flvplayer-volume-panel-handle'),\n    });\n\n    Object.defineProperty(control, '$fullscreen', {\n        value: options.container.querySelector('.flvplayer-fullscreen'),\n    });\n\n    Object.defineProperty(control, '$progress', {\n        value: options.container.querySelector('.flvplayer-controls-progress'),\n    });\n\n    Object.defineProperty(control, '$loaded', {\n        value: options.container.querySelector('.flvplayer-loaded'),\n    });\n\n    Object.defineProperty(control, '$played', {\n        value: options.container.querySelector('.flvplayer-played'),\n    });\n\n    Object.defineProperty(control, '$indicator', {\n        value: options.container.querySelector('.flvplayer-indicator'),\n    });\n}\n","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","export function isMobile() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n}\n\nexport function isWechat() {\n    return /MicroMessenger/i.test(navigator.userAgent);\n}\n\nexport function hasOwnProperty(obj, name) {\n    return Object.prototype.hasOwnProperty.call(obj, name);\n}\n\nexport function readBuffer(buffer) {\n    let index = 0;\n    function read(length) {\n        const tempUint8 = new Uint8Array(length);\n        for (let i = 0; i < length; i += 1) {\n            tempUint8[i] = buffer[index];\n            index += 1;\n        }\n        read.index = index;\n        return tempUint8;\n    }\n    read.index = 0;\n    return read;\n}\n\nexport function mergeBuffer(...buffers) {\n    const Cons = buffers[0].constructor;\n    return buffers.reduce((pre, val) => {\n        const merge = new Cons((pre.byteLength | 0) + (val.byteLength | 0));\n        merge.set(pre, 0);\n        merge.set(val, pre.byteLength | 0);\n        return merge;\n    }, new Cons());\n}\n\nexport function createWorker(workerString) {\n    return new Worker(URL.createObjectURL(new Blob([workerString], { type: 'application/javascript' })));\n}\n\nexport function secondToTime(second) {\n    const add0 = num => (num < 10 ? `0${num}` : String(num));\n    const hour = Math.floor(second / 3600);\n    const min = Math.floor((second - hour * 3600) / 60);\n    const sec = Math.floor(second - hour * 3600 - min * 60);\n    return (hour > 0 ? [hour, min, sec] : [min, sec]).map(add0).join(':');\n}\n\nexport function getNowTime() {\n    if (performance && typeof performance.now === 'function') {\n        return performance.now();\n    }\n    return Date.now();\n}\n\nexport function debounce(func, wait, context) {\n    let timeout;\n    function fn(...args) {\n        const later = function later() {\n            timeout = null;\n            func.apply(context, args);\n        };\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    }\n\n    fn.clearTimeout = function ct() {\n        clearTimeout(timeout);\n    };\n\n    return fn;\n}\n\nexport function throttle(callback, delay) {\n    let isThrottled = false;\n    let args;\n    let context;\n\n    function fn(...args2) {\n        if (isThrottled) {\n            args = args2;\n            context = this;\n            return;\n        }\n\n        isThrottled = true;\n        callback.apply(this, args2);\n        setTimeout(() => {\n            isThrottled = false;\n            if (args) {\n                fn.apply(context, args);\n                args = null;\n                context = null;\n            }\n        }, delay);\n    }\n\n    return fn;\n}\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}\n\nexport function setStyle(element, key, value) {\n    if (typeof key === 'object') {\n        Object.keys(key).forEach(item => {\n            setStyle(element, item, key[item]);\n        });\n    }\n    element.style[key] = value;\n    return element;\n}\n\nexport function getStyle(element, key, numberType = true) {\n    const value = getComputedStyle(element, null).getPropertyValue(key);\n    return numberType ? parseFloat(value) : value;\n}\n\nexport function loadScript(url, name) {\n    return new Promise((resolve, reject) => {\n        const $script = document.createElement('script');\n        $script.type = 'text/javascript';\n        $script.onload = () => {\n            if (window[name]) {\n                resolve(window[name]);\n            } else {\n                reject(new Error(`Unable to find global variable '${name}' from '${url}'`));\n            }\n        };\n        $script.onerror = () => {\n            reject(new Error(`Resource loading failed '${url}'`));\n        };\n        $script.src = url;\n        document.head.appendChild($script);\n    });\n}\n\nexport function proxyPropertys(target, ...sources) {\n    return sources.reduce((result, source) => {\n        Object.getOwnPropertyNames(source).forEach(key => {\n            if (!hasOwnProperty(result, key)) {\n                Object.defineProperty(result, key, Object.getOwnPropertyDescriptor(source, key));\n            } else {\n                throw new Error(`Target attribute name is duplicated: ${key}`);\n            }\n        });\n        return result;\n    }, target);\n}\n\nexport function calculationRate(callback) {\n    let totalSize = 0;\n    let lastTime = getNowTime();\n    return size => {\n        totalSize += size;\n        const thisTime = getNowTime();\n        const diffTime = thisTime - lastTime;\n        if (diffTime >= 1000) {\n            callback((totalSize / diffTime) * 1000);\n            lastTime = thisTime;\n            totalSize = 0;\n        }\n    };\n}\n","import { setStyle } from '../utils';\n\nexport default function observer(flv) {\n    const {\n        events: { proxy },\n        player,\n    } = flv;\n    const object = document.createElement('object');\n    object.setAttribute('aria-hidden', 'true');\n    object.setAttribute('tabindex', -1);\n    object.type = 'text/html';\n    object.data = 'about:blank';\n\n    setStyle(object, {\n        display: 'block',\n        position: 'absolute',\n        top: '0',\n        left: '0',\n        height: '100%',\n        width: '100%',\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        zIndex: '-1',\n    });\n\n    let playerWidth = player.width;\n    let playerHeight = player.height;\n    proxy(object, 'load', () => {\n        proxy(object.contentDocument.defaultView, 'resize', () => {\n            if (player.width !== playerWidth || player.height !== playerHeight) {\n                playerWidth = player.width;\n                playerHeight = player.height;\n                flv.emit('resize');\n            }\n        });\n    });\n\n    player.$container.appendChild(object);\n}\n","export default function hotkey(flv, control) {\n    const {\n        events: { proxy },\n        player,\n    } = flv;\n\n    const keys = {};\n\n    function addHotkey(key, event) {\n        if (keys[key]) {\n            keys[key].push(event);\n        } else {\n            keys[key] = [event];\n        }\n    }\n\n    addHotkey(27, () => {\n        if (control.fullscreen) {\n            player.fullscreen = false;\n        }\n    });\n\n    addHotkey(32, () => {\n        player.toggle();\n    });\n\n    addHotkey(37, () => {\n        player.currentTime -= 5;\n    });\n\n    addHotkey(38, () => {\n        player.volume += 0.1;\n    });\n\n    addHotkey(39, () => {\n        player.currentTime += 5;\n    });\n\n    addHotkey(40, () => {\n        player.volume -= 0.1;\n    });\n\n    proxy(window, 'keydown', event => {\n        if (control.isFocus) {\n            const tag = document.activeElement.tagName.toUpperCase();\n            const editable = document.activeElement.getAttribute('contenteditable');\n            if (tag !== 'INPUT' && tag !== 'TEXTAREA' && editable !== '' && editable !== 'true') {\n                const events = keys[event.keyCode];\n                if (events) {\n                    event.preventDefault();\n                    events.forEach(fn => fn());\n                }\n            }\n        }\n    });\n}\n","/*!\n* screenfull\n* v4.2.1 - 2019-07-27\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\tvar keyboardAllowed = typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit (Safari 5.1)\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (elem) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar request = fn.requestFullscreen;\n\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telem = elem || document.documentElement;\n\n\t\t\t\tvar promise;\n\n\t\t\t\t// Work around Safari 5.1 bug: reports support for\n\t\t\t\t// keyboard in fullscreen even though it doesn't.\n\t\t\t\t// Browser sniffing, since the alternative with\n\t\t\t\t// setTimeout is even worse.\n\t\t\t\tif (/ Version\\/5\\.1(?:\\.\\d+)? Safari\\//.test(navigator.userAgent)) {\n\t\t\t\t\tpromise = elem[request]();\n\t\t\t\t} else {\n\t\t\t\t\tpromise = elem[request](keyboardAllowed ? Element.ALLOW_KEYBOARD_INPUT : {});\n\t\t\t\t}\n\n\t\t\t\tPromise.resolve(promise).catch(reject);\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tdocument[fn.exitFullscreen]();\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (elem) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(elem);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = false;\n\t\t} else {\n\t\t\twindow.screenfull = false;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tenabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t\t// TODO: remove this in the next major version\n\t\tmodule.exports.default = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","import screenfull from 'screenfull';\n\nexport default function property(flv, control) {\n    const { player } = flv;\n\n    Object.defineProperty(control, 'controls', {\n        get: () => {\n            return player.$player.classList.contains('flvplayer-controls-show');\n        },\n        set: type => {\n            if (type) {\n                player.$player.classList.add('flvplayer-controls-show');\n            } else {\n                player.$player.classList.remove('flvplayer-controls-show');\n            }\n        },\n    });\n\n    Object.defineProperty(control, 'loading', {\n        get: () => {\n            return player.$player.classList.contains('flvplayer-loading-show');\n        },\n        set: type => {\n            if (type) {\n                player.$player.classList.add('flvplayer-loading-show');\n            } else {\n                player.$player.classList.remove('flvplayer-loading-show');\n            }\n        },\n    });\n\n    try {\n        const screenfullChange = () => {\n            if (control.fullscreen) {\n                player.$container.classList.add('flvplayer-fullscreen');\n            } else {\n                player.$container.classList.remove('flvplayer-fullscreen');\n            }\n            control.autoSize();\n        };\n        screenfull.on('change', screenfullChange);\n        flv.events.destroys.push(() => {\n            screenfull.off('change', screenfullChange);\n        });\n    } catch (error) {\n        //\n    }\n\n    Object.defineProperty(control, 'fullscreen', {\n        get: () => screenfull.isFullscreen || player.$container.classList.contains('flvplayer-fullscreen-web'),\n        set: type => {\n            if (type) {\n                try {\n                    screenfull.request(player.$container);\n                } catch (error) {\n                    player.$container.classList.add('flvplayer-fullscreen-web');\n                    control.autoSize();\n                }\n            } else {\n                try {\n                    screenfull.exit();\n                } catch (error) {\n                    player.$container.classList.remove('flvplayer-fullscreen-web');\n                    control.autoSize();\n                }\n            }\n        },\n    });\n\n    Object.defineProperty(control, 'autoSize', {\n        value: () => {\n            player.$container.style.padding = '0 0';\n            const playerWidth = player.width;\n            const playerHeight = player.height;\n            const playerRatio = playerWidth / playerHeight;\n            const canvasWidth = player.$canvas.width;\n            const canvasHeight = player.$canvas.height;\n            const canvasRatio = canvasWidth / canvasHeight;\n            if (playerRatio > canvasRatio) {\n                const padding = (playerWidth - playerHeight * canvasRatio) / 2;\n                player.$container.style.padding = `0 ${padding}px`;\n            } else {\n                const padding = (playerHeight - playerWidth / canvasRatio) / 2;\n                player.$container.style.padding = `${padding}px 0`;\n            }\n        },\n    });\n}\n","import { secondToTime, throttle, debounce, clamp, getStyle, setStyle } from '../utils';\n\nexport default function controls(flv, control) {\n    const {\n        options: { poster },\n        events: { proxy },\n        player,\n    } = flv;\n\n    proxy(window, ['click', 'contextmenu'], event => {\n        if (event.composedPath().indexOf(player.$container) > -1) {\n            control.isFocus = true;\n        } else {\n            control.isFocus = false;\n        }\n    });\n\n    control.autoSize();\n    flv.on('resize', () => {\n        control.autoSize();\n    });\n\n    flv.on('scripMeta', () => {\n        control.autoSize();\n    });\n\n    proxy(window, 'orientationchange', () => {\n        setTimeout(() => {\n            control.autoSize();\n        }, 300);\n    });\n\n    if (poster) {\n        flv.once('play', () => {\n            control.$poster.style.display = 'none';\n        });\n\n        flv.once('seeked', () => {\n            control.$poster.style.display = 'none';\n        });\n    }\n\n    flv.on('waiting', () => {\n        control.loading = true;\n    });\n\n    flv.on('ended', () => {\n        control.loading = false;\n    });\n\n    flv.on('timeupdate', () => {\n        control.loading = false;\n    });\n\n    proxy(control.$play, 'click', () => {\n        player.play();\n    });\n\n    proxy(control.$pause, 'click', () => {\n        player.pause();\n    });\n\n    const loadedFn = throttle(timestamp => {\n        const time = clamp(timestamp / player.duration, 0, 1);\n        control.$loaded.style.width = `${time * 100}%`;\n    }, 500);\n\n    flv.on('videoLoaded', timestamp => {\n        if (!flv.options.live) {\n            loadedFn(timestamp);\n        }\n    });\n\n    const timeupdateFn = throttle(currentTime => {\n        control.$played.style.width = `${(currentTime / player.duration) * 100}%`;\n        control.$current.innerText = secondToTime(currentTime);\n    }, 500);\n\n    flv.on('timeupdate', currentTime => {\n        if (!flv.options.live) {\n            timeupdateFn(currentTime);\n        }\n    });\n\n    flv.on('seeked', currentTime => {\n        if (!flv.options.live) {\n            timeupdateFn(currentTime);\n        }\n    });\n\n    flv.on('play', () => {\n        control.$play.style.display = 'none';\n        control.$pause.style.display = 'block';\n    });\n\n    flv.on('ended', () => {\n        control.controls = true;\n        control.$play.style.display = 'block';\n        control.$pause.style.display = 'none';\n    });\n\n    flv.on('loop', () => {\n        control.controls = false;\n    });\n\n    flv.on('pause', () => {\n        control.$play.style.display = 'block';\n        control.$pause.style.display = 'none';\n        control.loading = false;\n    });\n\n    flv.on('scripMeta', () => {\n        if (!flv.options.live) {\n            control.$duration.innerText = secondToTime(player.duration);\n        }\n    });\n\n    proxy(control.$fullscreen, 'click', () => {\n        if (control.fullscreen) {\n            control.fullscreen = false;\n        } else {\n            control.fullscreen = true;\n        }\n    });\n\n    const autoHide = debounce(() => {\n        player.$player.classList.add('flvplayer-hide-cursor');\n        control.controls = false;\n    }, 5000);\n\n    proxy(player.$player, 'mousemove', () => {\n        autoHide.clearTimeout();\n        player.$player.classList.remove('flvplayer-hide-cursor');\n        control.controls = true;\n        if (player.playing) {\n            autoHide();\n        }\n    });\n\n    function volumeChangeFromEvent(event) {\n        const { left: panelLeft, width: panelWidth } = control.$volumePanel.getBoundingClientRect();\n        const { width: handleWidth } = control.$volumeHandle.getBoundingClientRect();\n        const percentage =\n            clamp(event.x - panelLeft - handleWidth / 2, 0, panelWidth - handleWidth / 2) / (panelWidth - handleWidth);\n        return percentage;\n    }\n\n    function setVolumeHandle(percentage) {\n        if (percentage === 0) {\n            if (!flv.isMobile) {\n                setStyle(control.$volumeHandle, 'left', '0');\n            }\n            setStyle(control.$volumeOn, 'display', 'none');\n            setStyle(control.$volumeOff, 'display', 'flex');\n        } else {\n            if (!flv.isMobile) {\n                const panelWidth = getStyle(control.$volumePanel, 'width') || 60;\n                const handleWidth = getStyle(control.$volumeHandle, 'width');\n                const width = (panelWidth - handleWidth) * percentage;\n                setStyle(control.$volumeHandle, 'left', `${width}px`);\n            }\n            setStyle(control.$volumeOn, 'display', 'flex');\n            setStyle(control.$volumeOff, 'display', 'none');\n        }\n    }\n\n    if (flv.options.hasAudio) {\n        let lastVolume = 0;\n        let isVolumeDroging = false;\n\n        if (flv.options.muted) {\n            setVolumeHandle(0);\n        } else {\n            setVolumeHandle(flv.options.volume);\n        }\n\n        flv.on('volumechange', () => {\n            setVolumeHandle(player.volume);\n        });\n\n        proxy(control.$volumeOn, 'click', () => {\n            control.$volumeOn.style.display = 'none';\n            control.$volumeOff.style.display = 'block';\n            lastVolume = player.volume;\n            player.volume = 0;\n        });\n\n        proxy(control.$volumeOff, 'click', () => {\n            control.$volumeOn.style.display = 'block';\n            control.$volumeOff.style.display = 'none';\n            player.volume = lastVolume || 0.7;\n        });\n\n        if (!flv.isMobile) {\n            proxy(control.$volumePanel, 'click', event => {\n                player.volume = volumeChangeFromEvent(event);\n            });\n\n            proxy(control.$volumeHandle, 'mousedown', () => {\n                isVolumeDroging = true;\n            });\n\n            proxy(control.$volumeHandle, 'mousemove', event => {\n                if (isVolumeDroging) {\n                    player.volume = volumeChangeFromEvent(event);\n                }\n            });\n        }\n\n        proxy(document, 'mouseup', () => {\n            if (isVolumeDroging) {\n                isVolumeDroging = false;\n            }\n        });\n    }\n\n    function getPosFromEvent(event) {\n        const { $progress } = control;\n        const { left } = $progress.getBoundingClientRect();\n        const width = clamp(event.x - left, 0, $progress.clientWidth);\n        const second = (width / $progress.clientWidth) * player.duration;\n        const time = secondToTime(second);\n        const percentage = clamp(width / $progress.clientWidth, 0, 1);\n        return { second, time, width, percentage };\n    }\n\n    if (!flv.options.live && flv.options.cache) {\n        proxy(control.$progress, 'click', event => {\n            if (event.target !== control.$indicator) {\n                const { second, percentage } = getPosFromEvent(event);\n                if (second <= player.loaded) {\n                    control.$played.style.width = `${percentage * 100}%`;\n                    player.currentTime = second;\n                }\n            }\n        });\n\n        let isIndicatorDroging = false;\n        proxy(control.$indicator, 'mousedown', () => {\n            isIndicatorDroging = true;\n        });\n\n        proxy(document, 'mousemove', event => {\n            if (isIndicatorDroging) {\n                const { second, percentage } = getPosFromEvent(event);\n                if (second <= player.loaded) {\n                    control.$played.style.width = `${percentage * 100}%`;\n                    player.currentTime = second;\n                }\n            }\n        });\n\n        proxy(document, 'mouseup', () => {\n            if (isIndicatorDroging) {\n                isIndicatorDroging = false;\n            }\n        });\n    }\n}\n","import './style.scss';\nimport template from './template';\nimport observer from './observer';\nimport hotkey from './hotkey';\nimport property from './property';\nimport events from './events';\n\nexport default class Control {\n    constructor(flv) {\n        template(flv, this);\n        observer(flv, this);\n        property(flv, this);\n        events(flv, this);\n        if (flv.options.hotkey) {\n            hotkey(flv, this);\n        }\n    }\n}"],"names":["iconsMap","play","pause","volume","volumeClose","fullscreen","loading","Object","keys","reduce","icons","key","template","flv","control","options","player","$player","classList","add","live","insertAdjacentHTML","poster","hasAudio","isMobile","defineProperty","value","container","querySelector","secondToTime","second","add0","num","String","hour","Math","floor","min","sec","map","join","debounce","func","wait","context","timeout","fn","args","later","apply","clearTimeout","setTimeout","ct","throttle","callback","delay","isThrottled","args2","clamp","a","b","max","setStyle","element","_typeof","forEach","item","style","getStyle","numberType","getComputedStyle","getPropertyValue","parseFloat","observer","proxy","events","object","document","createElement","setAttribute","type","data","display","position","top","left","height","width","overflow","pointerEvents","zIndex","playerWidth","playerHeight","contentDocument","defaultView","emit","$container","appendChild","hotkey","addHotkey","event","push","toggle","currentTime","window","isFocus","tag","activeElement","tagName","toUpperCase","editable","getAttribute","keyCode","preventDefault","property","get","contains","set","remove","screenfullChange","autoSize","screenfull","on","destroys","off","error","isFullscreen","request","exit","padding","playerRatio","canvasWidth","$canvas","canvasHeight","canvasRatio","controls","composedPath","indexOf","once","$poster","$play","$pause","loadedFn","timestamp","time","duration","$loaded","timeupdateFn","$played","$current","innerText","$duration","$fullscreen","autoHide","playing","volumeChangeFromEvent","$volumePanel","getBoundingClientRect","panelLeft","panelWidth","$volumeHandle","handleWidth","percentage","x","setVolumeHandle","$volumeOn","$volumeOff","lastVolume","isVolumeDroging","muted","getPosFromEvent","$progress","clientWidth","cache","target","$indicator","loaded","isIndicatorDroging","Control"],"mappings":"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"}